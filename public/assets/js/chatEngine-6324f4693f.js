class chatEngine{constructor(e,s){this.chatbox=$(`#${e}`),this.userEmail=s,this.socket=io.connect("http://localhost:5000",{withCredentials:!0}),this.userEmail&&this.connectionHandler()}connectionHandler(){let e=this;this.socket.on("connect",(function(){console.log("connection established using socket!"),e.socket.emit("join_chat",{useremail:e.userEmail,chatroom:"codial"}),e.socket.on("user_joined",(function(e){})),$("#chat-submit").click((function(s){let o=$("#new-chat").val();$("#new-chat").val(""),""!=o&&e.socket.emit("send_message",{msg:o,useremail:e.userEmail,chatroom:"codial"})})),e.socket.on("receive_msg",(function(s){console.log("receive_msg"),$.ajax({type:"post",url:`chats/create/?msg=${s.msg}&useremail=${s.useremail}&chatroom=${s.chatroom}`,success:function(e){console.log("chat has been saved ",e)},error:function(e){console.log(e.responseText)}});let o="other-msg";e.userEmail==s.useremail&&(o="self-msg");let t=`<li class= ${o} >\n                                ${s.msg}\n                                <br>\n                                <sub>${s.useremail}</sub>\n                            </li>`;$("#chat-msg").append(t)}))}))}}