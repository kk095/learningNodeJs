class postComment{constructor(e){this.postId=e,this.createComment(e);let t=this;$(`#ul-comments-${e}>li`).each((function(e,n){t.removeComment(n)}))}createComment(e){let t=this,n=$(`#commentform-${e}`);$(n).submit((function(e){e.preventDefault(),$.ajax({type:"post",url:"/comments/create",data:$(e.target).serialize()}).done((function(n){let o=t.commentDom(n.data);$(`#ul-comments-${t.postId}`).append(o);let i=$(`#li-${n.data._id}`);t.removeComment(i),t.notification(n.message);let m=$(`#li-${n.data._id}>.like-btn`);new Likes(m),$(e.target.content).val("")})).fail((function(e){console.log(e.responseText)}))}))}commentDom(e){return`\n        <li id="li-${e._id}">\n            <a href="/comments/remove/${e._id}" class="comment-destroy">X</a>\n            ${e.content} <br>    \n            ${e.user.name}\n            <br>\n            <a class="like-btn" href="/like/toggle/?id=${e._id}&type=Comments" data-likes="${e.likes.length}">${e.likes.length} Likes</a>\n            </li>\n            <br>\n        `}notification(e){new Noty({type:`${Object.keys(e)[0]}`,layout:"topRight",text:`${e.success}`,theme:"relax",timeout:1500}).show()}removeComment(e){let t=this;$(".comment-destroy",e).click((function(n){n.preventDefault();const o=$(this).attr("href");$.ajax({type:"get",url:o}).done((function(n){$(e).remove(),t.notification(n.message)}))}))}}